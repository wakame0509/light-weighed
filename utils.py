from hand_group_definitions import hand_groups
import random

def generate_deck():
    """52枚のデッキを生成"""
    ranks = "23456789TJQKA"
    suits = "cdhs"
    return [r + s for r in ranks for s in suits]

def remove_known_cards(deck, known_cards):
    """指定されたカードをデッキから除外"""
    return [card for card in deck if card not in known_cards]

def get_hand_group_dict():
    """ハンドグループの辞書を取得"""
    return hand_groups

def get_group_hands(group_name):
    """指定されたハンドグループ名に対応するハンド一覧を返す"""
    return hand_groups.get(group_name, [])

def get_hand_range_25():
    """上位25%レンジ（カード形式で展開）"""
    converted = []
    raw = [
        ["A", "A"], ["K", "K"], ["Q", "Q"], ["J", "J"], ["T", "T"],
        ["9", "9"], ["8", "8"], ["7", "7"], ["6", "6"],
        ["A", "K", "s"], ["A", "Q", "s"], ["A", "J", "s"], ["A", "T", "s"], ["K", "Q", "s"],
        ["K", "J", "s"], ["Q", "J", "s"], ["J", "T", "s"], ["T", "9", "s"],
        ["A", "K", "o"], ["A", "Q", "o"], ["A", "J", "o"], ["K", "Q", "o"]
    ]
    for hand in raw:
        if len(hand) == 2:
            r1, r2 = hand
            converted.append([r1 + "s", r2 + "h"])
        elif len(hand) == 3:
            r1, r2, suited = hand
            if suited == "s":
                converted.append([r1 + "s", r2 + "s"])
            else:
                converted.append([r1 + "s", r2 + "h"])
    return converted

def get_hand_range_30():
    """上位30%レンジ（25%に追加）"""
    return get_hand_range_25() + [
        ["5s", "5h"], ["4s", "4h"],
        ["9s", "8s"], ["8s", "7s"], ["Qs", "Ts"], ["Ks", "Ts"],
        ["As", "Th"], ["Ks", "Jh"], ["Qs", "Jh"]
    ]
# プリフロップ勝率（vs ランダム、169通り）
preflop_winrates = {
    "AA": 85.2, "KK": 82.1, "QQ": 79.5, "JJ": 77.0, "TT": 74.2, "99": 71.0, "88": 67.5,
    "77": 63.8, "66": 60.1, "55": 56.3, "44": 52.5, "33": 48.5, "22": 45.0,

    "AKs": 67.0, "AQs": 66.0, "AJs": 65.0, "ATs": 63.0, "A9s": 61.0, "A8s": 60.0,
    "A7s": 59.0, "A6s": 58.0, "A5s": 58.0, "A4s": 57.0, "A3s": 57.0, "A2s": 56.0,
    "KQs": 64.0, "KJs": 63.0, "KTs": 62.0, "K9s": 60.0, "K8s": 58.0, "K7s": 56.0,
    "K6s": 55.0, "K5s": 54.0, "K4s": 53.0, "K3s": 52.0, "K2s": 51.0,
    "QJs": 62.0, "QTs": 61.0, "Q9s": 59.0, "Q8s": 57.0, "Q7s": 55.0,
    "Q6s": 53.0, "Q5s": 52.0, "Q4s": 51.0, "Q3s": 50.0, "Q2s": 49.0,
    "JTs": 60.0, "J9s": 58.0, "J8s": 56.0, "J7s": 54.0, "J6s": 52.0,
    "J5s": 50.0, "J4s": 49.0, "J3s": 48.0, "J2s": 47.0,
    "T9s": 57.0, "T8s": 55.0, "T7s": 53.0, "T6s": 51.0, "T5s": 49.0,
    "T4s": 48.0, "T3s": 47.0, "T2s": 46.0,
    "98s": 54.0, "97s": 52.0, "96s": 50.0, "95s": 48.0, "94s": 47.0,
    "93s": 46.0, "92s": 45.0,
    "87s": 53.0, "86s": 51.0, "85s": 49.0, "84s": 47.0, "83s": 46.0, "82s": 45.0,
    "76s": 52.0, "75s": 50.0, "74s": 48.0, "73s": 46.0, "72s": 45.0,
    "65s": 51.0, "64s": 49.0, "63s": 47.0, "62s": 45.0,
    "54s": 50.0, "53s": 48.0, "52s": 46.0,
    "43s": 47.0, "42s": 45.0,
    "32s": 44.0,

    "AKo": 65.0, "AQo": 63.0, "AJo": 62.0, "ATo": 60.0, "A9o": 58.0, "A8o": 57.0,
    "A7o": 56.0, "A6o": 55.0, "A5o": 54.0, "A4o": 53.0, "A3o": 52.0, "A2o": 51.0,
    "KQo": 61.0, "KJo": 60.0, "KTo": 58.0, "K9o": 56.0, "K8o": 54.0,
    "K7o": 52.0, "K6o": 51.0, "K5o": 50.0, "K4o": 49.0, "K3o": 48.0, "K2o": 47.0,
    "QJo": 58.0, "QTo": 56.0, "Q9o": 54.0, "Q8o": 52.0, "Q7o": 50.0,
    "Q6o": 48.0, "Q5o": 47.0, "Q4o": 46.0, "Q3o": 45.0, "Q2o": 44.0,
    "JTo": 55.0, "J9o": 53.0, "J8o": 51.0, "J7o": 49.0, "J6o": 47.0,
    "J5o": 46.0, "J4o": 45.0, "J3o": 44.0, "J2o": 43.0,
    "T9o": 52.0, "T8o": 50.0, "T7o": 48.0, "T6o": 46.0,
    "T5o": 45.0, "T4o": 44.0, "T3o": 43.0, "T2o": 42.0,
    "98o": 49.0, "97o": 47.0, "96o": 45.0, "95o": 43.0,
    "94o": 42.0, "93o": 41.0, "92o": 40.0,
    "87o": 48.0, "86o": 46.0, "85o": 44.0, "84o": 42.0, "83o": 41.0, "82o": 40.0,
    "76o": 47.0, "75o": 45.0, "74o": 43.0, "73o": 41.0, "72o": 40.0,
    "65o": 46.0, "64o": 44.0, "63o": 42.0, "62o": 40.0,
    "54o": 45.0, "53o": 43.0, "52o": 41.0,
    "43o": 42.0, "42o": 40.0,
    "32o": 39.0
}
