import random

# --- デッキ生成・カード除外 ---
def generate_deck():
    ranks = "23456789TJQKA"
    suits = "cdhs"
    return [r + s for r in ranks for s in suits]

def remove_known_cards(deck, known_cards):
    return [card for card in deck if card not in known_cards]


# --- ハンドグループ ---
hand_groups = {
    "High Pair": [["A", "A"], ["K", "K"], ["Q", "Q"]],
    "Mid Pair": [["J", "J"], ["T", "T"], ["9", "9"]],
    "Low Pair": [["8", "8"], ["7", "7"], ["6", "6"], ["5", "5"], ["4", "4"], ["3", "3"], ["2", "2"]],
    
    "High Suited Connector": [["A", "K", "s"], ["K", "Q", "s"], ["Q", "J", "s"], ["J", "T", "s"]],
    "Low Suited Connector": [["6", "5", "s"], ["5", "4", "s"], ["4", "3", "s"], ["3", "2", "s"]],
    
    "High Offsuit Connector": [["A", "K", "o"], ["K", "Q", "o"], ["Q", "J", "o"]],
    "Low Offsuit Connector": [["6", "5", "o"], ["5", "4", "o"], ["4", "3", "o"]],
    
    "High Broadway": [["A", "K"], ["A", "Q"], ["K", "Q"]],
    "Low Broadway": [["J", "T"], ["T", "9"], ["9", "8"]],
    
    "Suited Ace": [["A", r, "s"] for r in "KQJT98765432"],
    "Suited King": [["K", r, "s"] for r in "QJT98765432"],
    
    "Suited One-Gapper": [["9", "7", "s"], ["8", "6", "s"], ["7", "5", "s"], ["6", "4", "s"]]
}

def get_hand_group_dict():
    return hand_groups

def get_group_hands(group_name):
    return hand_groups.get(group_name, [])

def get_all_group_names():
    return list(hand_groups.keys())


# --- レンジ指定（上位25%・30%） ---
def get_hand_range_25():
    return [
        ["A", "A"], ["K", "K"], ["Q", "Q"], ["J", "J"], ["T", "T"],
        ["9", "9"], ["8", "8"], ["7", "7"], ["6", "6"],
        ["A", "K", "s"], ["A", "Q", "s"], ["A", "J", "s"], ["A", "T", "s"], ["K", "Q", "s"],
        ["K", "J", "s"], ["Q", "J", "s"], ["J", "T", "s"], ["T", "9", "s"],
        ["A", "K", "o"], ["A", "Q", "o"], ["A", "J", "o"], ["K", "Q", "o"]
    ]

def get_hand_range_30():
    return get_hand_range_25() + [
        ["5", "5"], ["4", "4"],
        ["9", "8", "s"], ["8", "7", "s"], ["Q", "T", "s"], ["K", "T", "s"],
        ["A", "T", "o"], ["K", "J", "o"], ["Q", "J", "o"]
    ]


# --- プリフロップ勝率（169通りすべて） ---
def get_static_preflop_winrates():
    return {
        'AA': 85.0, 'KK': 82.1, 'QQ': 79.5, 'JJ': 77.0, 'TT': 75.0, '99': 72.0, '88': 69.0, '77': 66.5,
        '66': 64.0, '55': 61.5, '44': 59.0, '33': 56.5, '22': 54.0,
        'AKs': 66.0, 'AQs': 64.0, 'AJs': 62.5, 'ATs': 60.5, 'A9s': 58.0, 'A8s': 56.0, 'A7s': 54.0,
        'A6s': 52.0, 'A5s': 51.5, 'A4s': 51.0, 'A3s': 50.5, 'A2s': 50.0,
        'KQs': 61.5, 'KJs': 60.0, 'KTs': 58.0, 'K9s': 55.5, 'K8s': 53.0, 'K7s': 51.0,
        'K6s': 49.0, 'K5s': 48.5, 'K4s': 48.0, 'K3s': 47.5, 'K2s': 47.0,
        'QJs': 59.5, 'QTs': 57.0, 'Q9s': 54.5, 'Q8s': 52.0, 'Q7s': 50.0,
        'Q6s': 48.0, 'Q5s': 47.5, 'Q4s': 47.0, 'Q3s': 46.5, 'Q2s': 46.0,
        'JTs': 57.5, 'J9s': 55.0, 'J8s': 52.5, 'J7s': 50.0, 'J6s': 48.0,
        'J5s': 47.0, 'J4s': 46.5, 'J3s': 46.0, 'J2s': 45.5,
        'T9s': 54.5, 'T8s': 52.0, 'T7s': 50.0, 'T6s': 48.0, 'T5s': 46.5,
        'T4s': 46.0, 'T3s': 45.5, 'T2s': 45.0,
        '98s': 51.0, '97s': 49.0, '96s': 47.0, '95s': 46.0,
        '94s': 45.5, '93s': 45.0, '92s': 44.5,
        '87s': 48.5, '86s': 47.0, '85s': 46.0, '84s': 45.5,
        '83s': 45.0, '82s': 44.5,
        '76s': 46.5, '75s': 45.5, '74s': 45.0, '73s': 44.5, '72s': 44.0,
        '65s': 45.0, '64s': 44.5, '63s': 44.0, '62s': 43.5,
        '54s': 44.0, '53s': 43.5, '52s': 43.0,
        '43s': 43.0, '42s': 42.5,
        '32s': 42.0,
        'AKo': 65.0, 'AQo': 63.0, 'AJo': 61.0, 'ATo': 59.0, 'A9o': 56.5, 'A8o': 54.5, 'A7o': 52.5,
        'A6o': 50.5, 'A5o': 50.0, 'A4o': 49.5, 'A3o': 49.0, 'A2o': 48.5,
        'KQo': 59.5, 'KJo': 57.5, 'KTo': 55.5, 'K9o': 53.0, 'K8o': 51.0, 'K7o': 49.0,
        'K6o': 47.0, 'K5o': 46.5, 'K4o': 46.0, 'K3o': 45.5, 'K2o': 45.0,
        'QJo': 56.5, 'QTo': 54.5, 'Q9o': 52.0, 'Q8o': 50.0, 'Q7o': 48.0,
        'Q6o': 46.5, 'Q5o': 46.0, 'Q4o': 45.5, 'Q3o': 45.0, 'Q2o': 44.5,
        'JTo': 54.5, 'J9o': 52.0, 'J8o': 50.0, 'J7o': 48.0, 'J6o': 46.5,
        'J5o': 45.5, 'J4o': 45.0, 'J3o': 44.5, 'J2o': 44.0,
        'T9o': 51.5, 'T8o': 49.0, 'T7o': 47.0, 'T6o': 45.5, 'T5o': 44.5,
        'T4o': 44.0, 'T3o': 43.5, 'T2o': 43.0,
        '98o': 48.0, '97o': 46.0, '96o': 44.5, '95o': 44.0,
        '94o': 43.5, '93o': 43.0, '92o': 42.5,
        '87o': 45.5, '86o': 44.5, '85o': 43.5, '84o': 43.0,
        '83o': 42.5, '82o': 42.0,
        '76o': 43.0, '75o': 42.5, '74o': 42.0, '73o': 41.5, '72o': 41.0,
        '65o': 42.0, '64o': 41.5, '63o': 41.0, '62o': 40.5,
        '54o': 41.0, '53o': 40.5, '52o': 40.0,
        '43o': 40.0, '42o': 39.5,
        '32o': 39.0
    }
